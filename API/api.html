<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Gyre API</title><meta name="description" content="Documentation for Gyre API"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="/gyre-sdk/assets/normalize.97087844201bf696.css">
<link rel="stylesheet" type="text/css" href="/gyre-sdk/assets/light.146e7c3d06d34520.css">
<link rel="stylesheet" type="text/css" href="/gyre-sdk/assets/dark.e5addf511eda33f2.css">
<link rel="stylesheet" type="text/css" href="/gyre-sdk/assets/style.c1e8b00faa060413.css"><script>var DOCGEN_TIMESTAMP="1724878695";var BASE_PATH="/gyre-sdk/";window.onload=function(){document.body.classList.remove("preload")};document.addEventListener("DOMContentLoaded",function(){const a=document.querySelector(`.site-nav a[href="${document.location.pathname}"]`);if(a){const b=a.closest("li");if(b)b.classList.add("active");const c=a.closest("details");if(c){c.setAttribute("open",true)}}});function setColor(){const a=localStorage.getItem("docgen-color");if(a==="dark"){document.documentElement.classList.remove("light");document.documentElement.classList.add("dark")}else{document.documentElement.classList.remove("dark");document.documentElement.classList.add("light")}}setColor()</script><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
<style>
    body {
--font-family:  "Figtree", sans-serif;
--font-size: 19px;
}
nav a,
nav span {
  font-size: var(--font-size);
}
.docgen-content a {
    font-size: var(--font-size);
    text-decoration: none;

}
#search-results a {
  font-size: var(--font-size);
}

p {
  font-size: var(--font-size);
}
li {
  font-size: var(--font-size);
}

p code,
li code {

  font-size: var(--font-size);
}

td {
    font-size: var(--font-size);

}
.docgen-content {
    max-width: 1280px;
}

.search {
    max-width: 1280px;
}


</style></head><body class="preload"><label for="menu-toggle-switch" class="menu-toggle-button">â˜°</label><input type="checkbox" id="menu-toggle-switch" value="0"><div class="page"><div class="header"><div class="logo"><a href="/gyre-sdk/"><img src="/gyre-sdk/logo.png" alt="Gyre SDK logo"></a><h2 class="project-title"><a href="/gyre-sdk/">Gyre SDK</a><span class="project-subtitle">DOCS</span></h2></div><div class="search"><form id="search-form"><input type="text" id="search-box" autocomplete="off" placeholder="Search..."><span class="search-icon">S</span><ul id="search-results"></ul></form></div><div class="header-dummy-right"></div></div><div class="container"><div class="sidebar-left"><nav class="site-nav"><ul class="tree"><li><a href="/gyre-sdk/getting_started">Getting Started with the Gyre SDK</a></li><li class="nested"><details><summary><span>Plugin Types</span></summary><ul><li><a href="/gyre-sdk/Plugin_Types/tools">Tools</a></li><li><a href="/gyre-sdk/Plugin_Types/layers">Custom Layer Types</a></li><li><a href="/gyre-sdk/Plugin_Types/ui_components">UI Components</a></li><li><a href="/gyre-sdk/Plugin_Types/brushes">Brush Plugins</a></li></ul></details></li><li class="nested"><details><summary><span>Gyre API</span></summary><ul><li><a href="/gyre-sdk/API/api">Gyre API</a></li><li><a href="/gyre-sdk/API/imageapi">ImageAPI Documentation</a></li><li><a href="/gyre-sdk/API/layermanager">layerManager API</a></li></ul></details></li><li class="nested"><details><summary><span>UI</span></summary><ul><li><a href="/gyre-sdk/UI/fds_components">FDS Image Editor Components</a></li><li><a href="/gyre-sdk/UI/icon_management">Icon Management</a></li></ul></details></li><li><a href="/gyre-sdk/examples">Gyre SDK Examples</a></li><li><a href="/gyre-sdk/uxp">For Adobe UXP Developers</a></li><li><a href="/gyre-sdk/share">Share Your Plugin</a></li><li><a href="/gyre-sdk/community">Developer Community</a></li></ul></nav><span id="light-dark-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" id="dark-mode-icon" viewBox="0 0 20 20" fill="currentColor"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" id="light-mode-icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"></path></svg></span></div><div class="docgen-content"><h1 id="gyre-api">Gyre API</h1>
<p><img src="../api.png" alt="Gyre API" /></p>
<p>The <code>gyre</code> API is accessible via <code>globalThis.gyre</code> and provides various parameters, functions, and APIs to interact with the current open document, handle layers, manage dialogs, and more in a ComfyUI/Gyre installation.</p>
<h2 id="parameters-and-apis">Parameters and APIs</h2>
<h3 id="layers">Layers</h3>
<ul>
<li>
<p><strong>layers</strong>: An array of all layers in the current open document.</p>
</li>
<li>
<p><strong>createLayerInstance</strong>: Create layer instance defined by layer type. Such an instance can be used to add a layer via layerManager API (see below). An optional data object can be provided to fill layer properties.</p>
<pre class="code">
<code class="language-javascript">gyre.createLayerInstance(
/** @type {string} */ name,
/** @type {string} */ type,
<span class="comment block documentation js"><span class="punctuation definition comment js">/**</span> @type {object} <span class="punctuation definition comment js">*/</span></span> <span class="variable other readwrite js">layerFrom</span><span class="invalid illegal stray-bracket-end js">)</span>
</code></pre>
</li>
</ul>
<h3 id="tools-layers">Tools Layers</h3>
<ul>
<li><strong>tools_layers</strong>: An array of all possible tools which are available.</li>
</ul>
<h3 id="mask-manager">Mask Manager</h3>
<ul>
<li><strong>maskManager</strong>: API for handling image mask data.
<ul>
<li><strong>loadMask</strong>: loads mask pixel data - it needs image URL (usually it is base64 image URL) as the only parameter. </li>
</ul>
</li>
</ul>
<h3 id="open-dialog">Open Dialog</h3>
<ul>
<li>
<p><strong>openDialog</strong>: Opens a dialog from any workflow in a ComfyUI/Gyre installation. These are usually dialogs added to a workflow used in a plugin. It has got the workflow name as the first parameter.</p>
<pre class="code">
<code class="language-javascript">gyre.ComfyUI.openDialog(
  /** @type {string} */ workflowName,
  /** @type {object} */ formData, 
  /** @type {string} */ title = '', 
  <span class="comment block documentation js"><span class="punctuation definition comment js">/**</span> @type {function} <span class="punctuation definition comment js">*/</span></span><span class="variable other readwrite js">newformdatacallback</span><span class="invalid illegal stray-bracket-end js">)</span>
</code></pre>
</li>
<li>
<p><strong>openDialogById</strong>: Same as <code>openDialog</code> but it has got the workflow-id as the first parameter.</p>
</li>
</ul>
<h3 id="image-api">Image API</h3>
<ul>
<li><strong>imageAPI</strong>: Functions handling image data. See <a href="/gyre-sdk/API/imageapi">imageAPI</a> documentation.</li>
</ul>
<h3 id="layermanager-api">layerManager API</h3>
<ul>
<li><strong>layerManager</strong>: Functions handling layers of canvas like adding or deleting layers. See <a href="/gyre-sdk/API/layermanager">layerManager</a> documentation.</li>
</ul>
<h3 id="palette-values">Palette Values</h3>
<ul>
<li><strong>paletteValues</strong>: Current environment parameters. Most important parameter:
<ul>
<li><strong>paletteValues.currentLayer</strong>: Accesses the active layer image data.</li>
</ul>
</li>
</ul>
<h3 id="drag-drop-api">Drag &amp; Drop API</h3>
<ul>
<li><strong>dragDrop</strong>: An API for handling drag &amp; drop operations, such as a rectangle for a simple selection.</li>
</ul>
<h3 id="comfyui-api">ComfyUI API</h3>
<ul>
<li><strong>gyre.ComfyUI</strong>: The ComfyUI API, which offers the following function:
<ul>
<li><strong>gyre.ComfyUI.executeWorkflow</strong>: Executes a workflow.<pre class="code">
<code class="language-javascript">gyre.ComfyUI.executeWorkflow(
  /** @type {string} */ workflowName,
  /** @type {function} */ callback_finished,
  /** @type {function} */ callBack_files,
  /** @type {object} */ data,
  /** @type {function} */ callback_error
<span class="invalid illegal stray-bracket-end js">)</span>
</code></pre>
</li>
<li><strong>gyre.ComfyUI.executeWorkflowById</strong>: Executes a workflow by internal ID.<pre class="code">
<code class="language-javascript">gyre.ComfyUI.executeWorkflowById(
  /** @type {string} */ workflowID
  /** @type {function} */ callback_finished,
  /** @type {function} */ callBack_files,
  /** @type {object} */ data,
  /** @type {function} */ callback_error
<span class="invalid illegal stray-bracket-end js">)</span>
</code></pre>
If you use the <code>executeWorkflow</code> function please make sure that a unique name is used like one which is connected to plugin tag name (e.g. <code>fds-image-editor-sam points</code>). So the end-user would be able to deactivate the default workflow and make a new one with same name (but with another ID) which will be used from the plugin. </li>
<li><strong>workflowList</strong>: An array of all available workflows.</li>
<li><strong>getWorkflowById</strong>: You can use this function to read a workflow by ID instead of searching in the list by own code.</li>
<li><strong>convertFormData</strong>: Converts complex data from <code>openDialog</code> or <code>openDialogById</code> function to simple key-value structure which is used by <code>executeWorkflow</code> and <code>executeWorkflowById</code>.<pre class="code">
<code class="language-javascript">data=gyre.ComfyUI.convertFormData(
  /** @type {object} */ formData
<span class="invalid illegal stray-bracket-end js">)</span>
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="canvas-parameters-and-helper-functions">Canvas Parameters and Helper Functions</h2>
<h3 id="canvas-parameters">Canvas Parameters</h3>
<ul>
<li><strong>canvas.width</strong>: The width of the open document/canvas.</li>
<li><strong>canvas.height</strong>: The height of the open document/canvas.</li>
<li><strong>canvas.zoom</strong>: The zoom level of the canvas.</li>
</ul>
<h3 id="canvas-helper-functions">Canvas Helper Functions</h3>
<ul>
<li><strong>canvas.calcPosition()</strong>: Calculates a position parameter according to the zoom and screen aspect ratio.</li>
<li><strong>canvas.mouseCoords(eventObject)</strong>: Delivers the real coordinates calculated from the mouse pointer position relative to the canvas, zoom, and screen aspect ratio.</li>
<li><strong>canvasComponent</strong>: Internal pointer to some main application functions. These are not available yet.</li>
</ul>
<h2 id="example-usage">Example Usage</h2>
<pre class="code">
<code class="language-javascript"><span class="comment line double-slash js"><span class="punctuation definition comment js">//</span> Accessing the gyre API
</span><span class="storage type js">const</span> <span class="variable other readwrite js">layers</span> <span class="keyword operator assignment js">=</span> <span class="variable other object js">globalThis</span><span class="punctuation accessor js">.</span><span class="meta property object js">gyre</span><span class="punctuation accessor js">.</span><span class="meta property object js">layers</span><span class="punctuation terminator statement js">;</span>
<span class="storage type js">const</span> <span class="variable other readwrite js">tools</span> <span class="keyword operator assignment js">=</span> <span class="variable other object js">globalThis</span><span class="punctuation accessor js">.</span><span class="meta property object js">gyre</span><span class="punctuation accessor js">.</span><span class="meta property object js">tools_layers</span><span class="punctuation terminator statement js">;</span>

<span class="comment line double-slash js"><span class="punctuation definition comment js">//</span> Using the layerManager API
</span><span class="variable other object js">globalThis</span><span class="punctuation accessor js">.</span><span class="meta property object js">gyre</span><span class="punctuation accessor js">.</span><span class="meta property object js">layerManager</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">addLayer</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">newLayer</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>

<span class="comment line double-slash js"><span class="punctuation definition comment js">//</span> Opening a dialog
</span><span class="variable other object js">globalThis</span><span class="punctuation accessor js">.</span><span class="meta property object js">gyre</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">openDialog</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">dialogName</span><span class="punctuation separator comma js">,</span> <span class="variable other readwrite js">dialogOptions</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>

<span class="comment line double-slash js"><span class="punctuation definition comment js">//</span> Executing a workflow in ComfyUI
</span><span class="variable other object js">globalThis</span><span class="punctuation accessor js">.</span><span class="meta property object js">gyre</span><span class="punctuation accessor js">.</span><span class="meta property object js">ComfyUI</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">executeWorkflow</span><span class="meta group js"><span class="punctuation section group js">(</span>
  <span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>exampleWorkflow<span class="punctuation definition string end js">&quot;</span></span><span class="punctuation separator comma js">,</span>
  <span class="meta function declaration js"><span class="storage type function js">function</span> <span class="entity name function js">onFinished</span><span class="punctuation section group begin js">(</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span></span><span class="meta block js"><span class="punctuation section block js">{</span>
    <span class="meta function-call method js"><span class="support type object console js">console</span><span class="punctuation accessor js">.</span><span class="support function console js">log</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>Workflow finished<span class="punctuation definition string end js">&quot;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
  <span class="punctuation section block js">}</span></span><span class="punctuation separator comma js">,</span>
  <span class="meta function declaration js"><span class="storage type function js">function</span> <span class="entity name function js">onFiles</span><span class="punctuation section group begin js">(</span><span class="variable parameter function js">files</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span></span><span class="meta block js"><span class="punctuation section block js">{</span>
    <span class="meta function-call method js"><span class="support type object console js">console</span><span class="punctuation accessor js">.</span><span class="support function console js">log</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>Files received<span class="punctuation definition string end js">&quot;</span></span><span class="punctuation separator comma js">,</span> <span class="variable other readwrite js">files</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
  <span class="punctuation section block js">}</span></span><span class="punctuation separator comma js">,</span>
  <span class="meta object-literal js"><span class="punctuation section block js">{</span> <span class="meta object-literal key js">key</span><span class="punctuation separator key-value js">:</span> <span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>value<span class="punctuation definition string end js">&quot;</span></span> <span class="punctuation section block js">}</span></span><span class="punctuation separator comma js">,</span>
  <span class="meta function declaration js"><span class="storage type function js">function</span> <span class="entity name function js">onError</span><span class="punctuation section group begin js">(</span><span class="variable parameter function js">error</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span></span><span class="meta block js"><span class="punctuation section block js">{</span>
    <span class="meta function-call method js"><span class="support type object console js">console</span><span class="punctuation accessor js">.</span><span class="support function console js">error</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>Workflow error<span class="punctuation definition string end js">&quot;</span></span><span class="punctuation separator comma js">,</span> <span class="variable other readwrite js">error</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
  <span class="punctuation section block js">}</span></span>
</span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>

<span class="comment line double-slash js"><span class="punctuation definition comment js">//</span> Canvas helper functions
</span><span class="storage type js">const</span> <span class="variable other readwrite js">position</span> <span class="keyword operator assignment js">=</span> <span class="variable other object js">globalThis</span><span class="punctuation accessor js">.</span><span class="meta property object js">gyre</span><span class="punctuation accessor js">.</span><span class="meta property object js">canvas</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">calcPosition</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="storage type js">const</span> <span class="variable other readwrite js">coords</span> <span class="keyword operator assignment js">=</span> <span class="variable other object js">globalThis</span><span class="punctuation accessor js">.</span><span class="meta property object js">gyre</span><span class="punctuation accessor js">.</span><span class="meta property object js">canvas</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">mouseCoords</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">event</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
</code></pre>
</div><div class="sidebar-right"><div class="page-nav" id="page-nav"><p class="page-nav-header">On this page</p><ul><li class="page-nav-level-1"><a href="#gyre-api">Gyre API</a></li><li class="page-nav-level-2"><a href="#parameters-and-apis">Parameters and APIs</a></li><li class="page-nav-level-3"><a href="#layers">Layers</a></li><li class="page-nav-level-3"><a href="#tools-layers">Tools Layers</a></li><li class="page-nav-level-3"><a href="#mask-manager">Mask Manager</a></li><li class="page-nav-level-3"><a href="#open-dialog">Open Dialog</a></li><li class="page-nav-level-3"><a href="#image-api">Image API</a></li><li class="page-nav-level-3"><a href="#layermanager-api">layerManager API</a></li><li class="page-nav-level-3"><a href="#palette-values">Palette Values</a></li><li class="page-nav-level-3"><a href="#drag-drop-api">Drag &amp; Drop API</a></li><li class="page-nav-level-3"><a href="#comfyui-api">ComfyUI API</a></li><li class="page-nav-level-2"><a href="#canvas-parameters-and-helper-functions">Canvas Parameters and Helper Functions</a></li><li class="page-nav-level-3"><a href="#canvas-parameters">Canvas Parameters</a></li><li class="page-nav-level-3"><a href="#canvas-helper-functions">Canvas Helper Functions</a></li><li class="page-nav-level-2"><a href="#example-usage">Example Usage</a></li></ul></div></div></div></div><script id="elasticlunr.min.js" async defer type="text/javascript" src="/gyre-sdk/assets/elasticlunr.min.d5632d4ce358acab.js"></script>
<script id="app.js" async defer type="text/javascript" src="/gyre-sdk/assets/app.f93b0a1c15e882d9.js"></script></body></html>